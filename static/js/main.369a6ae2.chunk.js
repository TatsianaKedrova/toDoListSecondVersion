(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{103:function(e,t,a){},104:function(e,t,a){},128:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o);a(103),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(104);var i=a(174),l=a(175),s=a(166),u=a(130),d=a(170),m=a(178),f=a(177),b=a(176),O=a(183),T=a(180),E=a(18),g=a(7),p={status:"idle",error:null},v=function(e){return{type:"APP/SET-STATUS",status:e}},h=function(e){return{type:"APP/SET-ERROR",error:e}};function j(e){return r.a.createElement(T.a,Object.assign({elevation:6,variant:"filled"},e))}function k(){var e=Object(E.c)((function(e){return e.app.error})),t=Object(E.b)(),a=null!==e,n=function(e,a){"clickaway"!==a&&t(h(null))};return r.a.createElement(O.a,{open:a,autoHideDuration:5e3,onClose:n},r.a.createElement(j,{onClose:n,severity:"error"},e))}var L,S,I=a(29),y=a(84),C=a.n(y).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"3356848e-44a4-478d-85f0-1e1fabb15c46"}}),w=function(){return C.get("todo-lists")},D=function(e){return C.post("todo-lists",{title:e})},A=function(e){return C.delete("todo-lists/".concat(e))},F=function(e,t){return C.put("todo-lists/".concat(e),{title:t})},P=function(e){return C.get("todo-lists/".concat(e,"/tasks"))},R=function(e,t){return C.delete("todo-lists/".concat(e,"/tasks/").concat(t))},N=function(e,t){return C.post("todo-lists/".concat(e,"/tasks"),{title:t})},M=function(e,t,a){return C.put("todo-lists/".concat(e,"/tasks/").concat(t),a)},x=function(e){return C.post("auth/login",e)};!function(e){e[e.New=0]="New",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Draft=3]="Draft"}(L||(L={})),function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.High=2]="High",e[e.Urgently=3]="Urgently",e[e.Later=4]="Later"}(S||(S={}));var K=[],G=function(e,t){return{type:"CHANGE-TODOLIST-STATUS",todoListId:e,status:t}},H=a(39),U=function(e,t){e.messages.length?t(h(e.messages[0])):t(h("Some error occurred!")),t(v("failed"))},V=function(e,t){t(h(e.message?e.message:"Some error occurred!")),t(v("failed"))},q={},z=function(e,t,a){return function(n,r){var o=r().tasks[a].find((function(t){return t.id===e}));if(o){var c=Object(g.a)({title:o.title,status:o.status,priority:o.priority,description:o.description,deadline:o.deadline,completed:o.completed,startDate:o.startDate},t);n(v("loading")),M(a,e,c).then((function(e){0===e.data.resultCode?(alert("Taniusha is genius!"),n(v("succeeded"))):U(e.data,n)})).catch((function(e){V(e,n)}))}else console.warn("Task not found")}},B=a(171),Z=a(129),J=a(42),W=a(179),$=a(168),_=r.a.memo((function(e){var t=Object(n.useState)(""),a=Object(J.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)(null),l=Object(J.a)(i,2),u=l[0],d=l[1],m=function(){o.trim()?e.addItem(o):d("Title is required!"),c("")};return r.a.createElement("div",null,r.a.createElement(W.a,{variant:"outlined",value:o,onChange:function(e){d(null),c(e.currentTarget.value)},onKeyPress:function(e){null!==u&&d(null),"Enter"===e.key&&m()},className:u?"error":"",error:!!u,label:"Title",helperText:u,disabled:e.disabled}),r.a.createElement(s.a,{onClick:m,color:"primary"},r.a.createElement($.a,null)))})),Y=r.a.memo((function(e){var t=Object(n.useState)(!1),a=Object(J.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)(e.title),l=Object(J.a)(i,2),s=l[0],u=l[1];return o?r.a.createElement(W.a,{color:"primary",variant:"standard",value:s,autoFocus:!0,onBlur:function(){c(!1),u(s)},onChange:function(e){u(e.currentTarget.value)},onKeyPress:function(t){"Enter"===t.key&&(e.changeTitle(s),c(!1))}}):r.a.createElement("span",{onDoubleClick:function(){c(!0)}},e.title)})),Q=a(169),X=a(181),ee=r.a.memo((function(e){var t=e.task,a=e.removeTask,o=e.changeTaskStatus,c=e.changeTaskTitle,i=Object(n.useCallback)((function(e){c(e,t.id)}),[c,t.id]);return r.a.createElement("div",{key:t.id,className:t.status===L.Completed?"is-done":""},r.a.createElement(X.a,{checked:t.status===L.Completed,color:"primary",onChange:function(e){var a=e.currentTarget.checked;o(t.id,a?L.Completed:L.New)}}),r.a.createElement(Y,{title:t.title,changeTitle:i}),r.a.createElement(s.a,{onClick:function(){return a(t.id)}},r.a.createElement(Q.a,null)))})),te=r.a.memo((function(e){var t=Object(E.b)();Object(n.useEffect)((function(){var a;t((a=e.id,function(e){e(v("loading")),P(a).then((function(t){e(function(e,t){return{type:"SET-TASK",tasks:e,todoListId:t}}(t.data.items,a)),e(v("succeeded"))})).catch((function(t){V(t,e)}))}))}),[]);var a=Object(n.useCallback)((function(t){return e.removeTask(t,e.id)}),[e.removeTask,e.id]),o=Object(n.useCallback)((function(t,a){return e.changeTaskStatus(t,a,e.id)}),[e.changeTaskStatus,e.id]),c=Object(n.useCallback)((function(t,a){e.changeTaskTitle(a,t,e.id)}),[e.changeTaskTitle,e.id]),i=Object(n.useCallback)((function(t){e.addTask(t,e.id)}),[e.addTask,e.id]),l=Object(n.useCallback)((function(t){e.changeTodoListTitle(t,e.id)}),[e.changeTodoListTitle,e.id]),u=Object(n.useCallback)((function(){return e.changeTodoListFilter("all",e.id)}),[e.changeTodoListFilter,e.id]),m=Object(n.useCallback)((function(){return e.changeTodoListFilter("active",e.id)}),[e.changeTodoListFilter,e.id]),f=Object(n.useCallback)((function(){return e.changeTodoListFilter("complete",e.id)}),[e.changeTodoListFilter,e.id]);return r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(Y,{title:e.title,changeTitle:l}),r.a.createElement(s.a,{onClick:function(){e.removeTodoList(e.id)},disabled:"loading"===e.todoListStatus},r.a.createElement(Q.a,null))),r.a.createElement(_,{addItem:i,disabled:"loading"===e.todoListStatus}),r.a.createElement("div",null,e.tasks.map((function(e){return r.a.createElement(ee,{key:e.id,task:e,removeTask:a,changeTaskStatus:o,changeTaskTitle:c})}))),r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(d.a,{style:{marginRight:"5px"},size:"small",color:"primary",variant:"all"===e.todoListFilter?"outlined":"contained",onClick:u},"All"),r.a.createElement(d.a,{style:{marginRight:"5px"},size:"small",color:"primary",variant:"active"===e.todoListFilter?"outlined":"contained",onClick:m},"Active"),r.a.createElement(d.a,{size:"small",color:"primary",variant:"complete"===e.todoListFilter?"outlined":"contained",onClick:f},"Complete")))})),ae=function(e){var t=e.demo,a=void 0!==t&&t,o=Object(E.c)((function(e){return e.todoLists})),c=Object(E.c)((function(e){return e.tasks})),i=Object(E.b)();Object(n.useEffect)((function(){a||i((function(e){e(v("loading")),w().then((function(t){e({type:"SET-TODOLISTS",todoLists:t.data}),e(v("succeeded"))}))}))}),[]);var l=Object(n.useCallback)((function(e,t){var a,n,r=(a=t,n=e,function(e){e(v("loading")),R(a,n).then((function(t){0===t.data.resultCode?(e(function(e,t){return{type:"REMOVE-TASK",taskID:e,todoListId:t}}(n,a)),e(v("succeeded"))):U(t.data,e)})).catch((function(t){V(t,e)}))});i(r)}),[i]),s=Object(n.useCallback)((function(e,t){var a=function(e,t){return function(a){a(v("loading")),N(e,t).then((function(e){0===e.data.resultCode?(a({type:"ADD-TASK",task:e.data.data.item}),a(v("succeeded"))):U(e.data,a)})).catch((function(e){V(e,a)}))}}(t,e);i(a)}),[i]),u=Object(n.useCallback)((function(e,t,a){var n=z(e,{status:t},a);i(n)}),[i]),d=Object(n.useCallback)((function(e,t,a){var n=z(e,{title:t},a);i(n)}),[i]),m=Object(n.useCallback)((function(e){var t,a=(t=e,function(e){e(v("loading")),e(G(t,"loading")),A(t).then((function(a){0===a.data.resultCode?(e({type:"REMOVE-TODOLIST",todoListID:t}),e(v("succeeded")),e(G(t,"succeeded"))):(a.data.messages.length?e(h(a.data.messages[0])):e(h("Some error occurred")),e(v("failed")))}))});i(a)}),[i]),f=Object(n.useCallback)((function(e){var t=function(e){return function(t){t(v("loading")),D(e).then((function(e){0===e.data.resultCode?(t({type:"ADD-TODOLIST",todolist:e.data.data.item}),t(v("succeeded"))):(e.data.messages.length?t(h(e.data.messages[0])):t(h("Some error occurred!")),t(v("failed")))}))}}(e);i(t)}),[i]),b=Object(n.useCallback)((function(e,t){var a=function(e,t){return function(a){a(v("loading")),F(e,t).then((function(){a(function(e,t){return{type:"CHANGE-TODOLIST-TITLE",titleTL:e,todoListId:t}}(t,e)),a(v("succeeded"))}))}}(t,e);i(a)}),[i]),O=Object(n.useCallback)((function(e,t){var a=function(e,t){return{type:"CHANGE-TODOLIST-FILTER",newFilterValue:e,todoListId:t}}(e,t);i(a)}),[i]);var T=o.map((function(e){var t=function(e){switch(e.filter){case"active":return c[e.id].filter((function(e){return e.status===L.New}));case"complete":return c[e.id].filter((function(e){return e.status===L.Completed}));default:return c[e.id]}}(e);return r.a.createElement(B.a,{item:!0,key:e.id},r.a.createElement(Z.a,{elevation:6,style:{padding:"20px"}},r.a.createElement(te,{id:e.id,title:e.title,todoListFilter:e.filter,todoListStatus:e.todolistStatus,tasks:t,addTask:s,removeTask:l,removeTodoList:m,changeTodoListFilter:O,changeTaskStatus:u,changeTaskTitle:d,changeTodoListTitle:b})))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{container:!0,style:{padding:"20px 0px"}},r.a.createElement(_,{addItem:f})),r.a.createElement(B.a,{container:!0,spacing:5},T))},ne=a(184),re=a(167),oe=a(172),ce=a(173),ie=a(88),le={email:"",password:"",rememberMe:!1},se=function(){var e=Object(E.b)(),t=Object(ie.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){console.log("validate");var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<8&&(t.password="Password must be 8 characters or more"):t.password="Required",t},onSubmit:function(t){var a;e((a=t,function(e){e(v("loading")),x(a).then((function(t){console.log(t.data.data.userId),0===t.data.resultCode?(e(function(e){return{type:"SET-LOGIN",loginInfo:e}}(a)),e(v("succeeded"))):U(t.data,e)})).catch((function(t){V(t,e)}))}))}});return r.a.createElement(B.a,{container:!0,justify:"center"},r.a.createElement(B.a,{item:!0,xs:4},r.a.createElement("form",{onSubmit:t.handleSubmit},r.a.createElement(ne.a,null,r.a.createElement(re.a,null,r.a.createElement("p",null,"To log in get registered",r.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"},"here")),r.a.createElement("p",null,"or use common test account credentials:"),r.a.createElement("p",null,"Email: free@samuraijs.com"),r.a.createElement("p",null,"Password: free")),r.a.createElement(oe.a,null,r.a.createElement(W.a,Object.assign({type:"email",label:"Email",margin:"normal"},t.getFieldProps("email"))),t.touched.email&&t.errors.email?r.a.createElement("div",{style:{color:"red"}},t.errors.email):null,r.a.createElement(W.a,Object.assign({type:"password",label:"Password",margin:"normal"},t.getFieldProps("password"))),t.touched.password&&t.errors.password?r.a.createElement("div",{style:{color:"red"}},t.errors.password):null,r.a.createElement(ce.a,{label:"Remember me",control:r.a.createElement(X.a,Object.assign({},t.getFieldProps("rememberMe"),{checked:t.values.rememberMe}))}),r.a.createElement(d.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))},ue=a(13);var de=function(e){var t=e.demo,a=void 0!==t&&t,n=Object(E.c)((function(e){return e.app.status}));return r.a.createElement("div",{className:"App"},r.a.createElement(k,null),r.a.createElement(i.a,{position:"static"},r.a.createElement(l.a,{style:{justifyContent:"space-between"}},r.a.createElement(s.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(b.a,null)),r.a.createElement(u.a,{variant:"h6"},"TodoList"),r.a.createElement(d.a,{color:"inherit"},"Login")),"loading"===n&&r.a.createElement(f.a,{color:"secondary"})),r.a.createElement(m.a,{fixed:!0},r.a.createElement(ue.d,null,r.a.createElement(ue.b,{exact:!0,path:"/",render:function(){return r.a.createElement(ae,{demo:a})}}),r.a.createElement(ue.b,{path:"/login",render:function(){return r.a.createElement(se,null)}}),r.a.createElement(ue.b,{path:"/404",render:function(){return r.a.createElement("h1",null,"404: PAGE NOT FOUND")}}),r.a.createElement(ue.a,{from:"*",to:"/404"}))))},me=a(57),fe=a(87),be=Object(me.b)({tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-TASK":console.log(t);var a=t.task,n=Object(g.a)({},e),r=[a].concat(Object(I.a)(n[a.todoListId]));return Object(g.a)(Object(g.a)({},n),{},Object(H.a)({},a.todoListId,r));case"REMOVE-TASK":var o=Object(g.a)({},e);return o[t.todoListId]=o[t.todoListId].filter((function(e){return e.id!==t.taskID})),o;case"UPDATE-TASK":var c=Object(g.a)({},e);return c[t.todoListId]=c[t.todoListId].map((function(e){return e.id===t.taskID?Object(g.a)(Object(g.a)({},e),t.model):e})),c;case"ADD-TODOLIST":return Object(g.a)(Object(g.a)({},e),{},Object(H.a)({},t.todolist.id,[]));case"REMOVE-TODOLIST":var i=Object(g.a)({},e);return delete i[t.todoListID],i;case"SET-TODOLISTS":var l=Object(g.a)({},e);return t.todoLists.forEach((function(e){l[e.id]=[]})),l;case"SET-TASK":return Object(g.a)(Object(g.a)({},e),{},Object(H.a)({},t.todoListId,t.tasks));default:return e}},todoLists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE-TODOLIST":var a=Object(I.a)(e);return a.filter((function(e){return e.id!==t.todoListID}));case"ADD-TODOLIST":var n=Object(I.a)(e),r=Object(g.a)(Object(g.a)({},t.todolist),{},{filter:"all",todolistStatus:"idle"});return[r].concat(Object(I.a)(n));case"CHANGE-TODOLIST-TITLE":var o=Object(I.a)(e);return o.map((function(e){return e.id===t.todoListId?Object(g.a)(Object(g.a)({},e),{},{title:t.titleTL}):e}));case"CHANGE-TODOLIST-FILTER":var c=Object(I.a)(e);return c.map((function(e){return e.id===t.todoListId?Object(g.a)(Object(g.a)({},e),{},{filter:t.newFilterValue}):e}));case"CHANGE-TODOLIST-STATUS":var i=Object(I.a)(e);return i.map((function(e){return e.id===t.todoListId?Object(g.a)(Object(g.a)({},e),{},{todolistStatus:t.status}):e}));case"SET-TODOLISTS":return t.todoLists.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{filter:"all",todolistStatus:"idle"})}));default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET-STATUS":return Object(g.a)(Object(g.a)({},e),{},{status:t.status});case"APP/SET-ERROR":return Object(g.a)(Object(g.a)({},e),{},{error:t.error});default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-LOGIN":return Object(g.a)(Object(g.a)({},e),{},{email:t.loginInfo.email,password:t.loginInfo.password,rememberMe:t.loginInfo.rememberMe});default:return e}}}),Oe=Object(me.c)(be,Object(me.a)(fe.a));window.store=Oe;var Te=a(63);c.a.render(r.a.createElement(E.a,{store:Oe},r.a.createElement(Te.a,null,r.a.createElement(de,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},98:function(e,t,a){e.exports=a(128)}},[[98,1,2]]]);
//# sourceMappingURL=main.369a6ae2.chunk.js.map